<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TI-RTOS Drivers: PDMCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI-RTOS Drivers
   &#160;<span id="projectnumber">tidrivers_cc13xx_cc26xx_2_21_01_01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c17777783ce38a5c07940aaaf742f522.html">exports</a></li><li class="navelem"><a class="el" href="dir_f6e916242039e0349c75a086e347d29e.html">tidrivers_cc13xx_cc26xx_2_21_01_01</a></li><li class="navelem"><a class="el" href="dir_66ebce97428d8a203c418c1e1c30b1d0.html">packages</a></li><li class="navelem"><a class="el" href="dir_bb9bb6c41181976c26c510dde001be8f.html">ti</a></li><li class="navelem"><a class="el" href="dir_3272f9f9556099c0b986cb38fa788482.html">drivers</a></li><li class="navelem"><a class="el" href="dir_ba8fcf1aa81afb2ab96a8a371cf6c048.html">pdm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PDMCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PDM driver implementation for a CC26XX PDM controller. </p>
<p>============================================================================</p>
<p>The PDM header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_d_m_c_c26_x_x_8h.html">ti/drivers/pdm/PDMCC26XX.h</a>&gt;</span></div>
</div><!-- fragment --><h1>Overview</h1>
<p>This driver is written to be able to perform continuous audio streaming of PDM data from a microphone. It also controls one DIO to be able to turn on power to the microphone.</p>
<p>This PDM driver performs two operations that requires processing</p><ul>
<li>PDM to PCM conversion</li>
<li>PCM compression (optional)</li>
</ul>
<p>This driver is configured to process 256 bytes of PDM data provided by the I2S hardware module at a time, sampled at 1.024 Mbps. The PDM driver consequently receives such a buffer approximately every 2ms. A frame of <a class="el" href="struct_p_d_m_c_c26_x_x___params.html#a05bff0a3c2ddbb3a49c2bc7a47a7fe24">PDMCC26XX_Params.retBufSizeInBytes</a> PCM data bytes minus four metadata bytes is provided to the application after being filled by all or part of one or more 64 byte buffers of PCM data derived from the 256 bytes of PDM data. The resulting PCM frame provided to the application is a 16bit PCM signal sampled at 16kHz.</p>
<p>The driver creates a separate task to run in.</p>
<dl class="section note"><dt>Note</dt><dd>The application must allow for the PDM driver task to run often enough to process the data received from I2S driver approximately every 2ms.</dd></dl>
<p>The driver currently only samples on a single edge of the I2S clock.</p>
<h1>General Behaviour</h1>
<p>Before using PDM on CC26XX:</p><ul>
<li>The PDM driver is initialized by calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8347c3f56db0ad7c3f357f13be098cf2" title="PDM CC26XX initialization. ">PDMCC26XX_init()</a>. This should be done in main before BIOS_start() is called.</li>
<li>The PDM system dependencies are set by calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a>. The driver is also marked as taken. Prior to this the system should call <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8347c3f56db0ad7c3f357f13be098cf2" title="PDM CC26XX initialization. ">PDMCC26XX_init()</a>. The driver also automatically allocates the first <a class="el" href="struct_p_d_m_c_c26_x_x__pcm_buffer.html" title="PCM buffer pointed to in a PDMCC26XX_BufferRequest. ">PDMCC26XX_pcmBuffer</a> of the size specified by the application in <a class="el" href="struct_p_d_m_c_c26_x_x___params.html#a05bff0a3c2ddbb3a49c2bc7a47a7fe24">PDMCC26XX_Params.retBufSizeInBytes</a>. This call also reserves the pins for the microphone signal and power specified in the board file.</li>
</ul>
<p>While using PDM on CC26XX:</p><ul>
<li>When <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> is called, the I2S driver starts processing the pdm stream, the PDM driver resets the internal state of the decimation filter, sets the driver to drop the first MAX(PDM_DECIMATION_STARTUP_DELAY_IN_SAMPLES, <a class="el" href="struct_p_d_m_c_c26_x_x___params.html#a1ffbb2852a48ff157c0f58df4dce4a3b">PDMCC26XX_Params.startupDelayWithClockInSamples</a>), and resets the metaData (including the sequence number). The driver will keep allocating PDMCC26XX_pcmBuffers on the heap and keep them in a queue until they are requested by the application. From now on, callbacks are generated every time a buffer is ready; if callbacks are asked for.</li>
<li>Data is acquired by the application by calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a>. After processing the buffer, the application is responsible for freeing the memory allocated for the buffer in a timely manner.</li>
<li>The stream is stopped when <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> is called. Note that this is a blocking call that will wait until the I2S hardware has gracefully shut down. This will take at most around 2ms, unless an error occurs. The system is allowed to enter standby again after <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> is called.</li>
</ul>
<p>After PDM operation has ended:</p><ul>
<li>Release system dependencies and free up all memory on the heap allocated for the PDM driver by calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a>.</li>
</ul>
<h1>Error Handling</h1>
<p>The application is notified of errors via the registered callback function.</p>
<h2>Lost Frames</h2>
<p>If the application fails to consume buffers in a timely manner and consequently the heap is full when driver tries to allocate a new buffer for new incoming data, the driver will drop all new incoming data until a buffer can be allocated to store it. Data is dropped one PCM data buffer at a time , even though it is streamed into the device and copied into the buffer in smaller chunks. This is done to keep the data expected in any buffer in sync with the sequence number of the buffer that keeps incrementing even when the buffer is dopped. The application may keep track of lost frames by comparing sequence numbers.</p>
<p>Hence, the PDM stream will never have a buffer overflow, but if the memory available in the heap is too low it may lose frames because because there is nowhere to put the incoming</p>
<p>If the heap frees up again and the PDM task runs, it will automatically resume normal operation again. The only application-observable difference is the incremented version number.</p>
<h2>PDMCC26XX_open Failing</h2>
<p><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> returns NULL and rolls back all prior parts of the initialisation if any part of the initialisation fails. The following can cause <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> to fail:</p><ul>
<li>The driver is already open</li>
<li>The heap is full when the application calls <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a></li>
<li>The PIN driver could not allocate the requested pins for the PDM driver</li>
<li>The I2S driver failed to initialise</li>
</ul>
<h2>PDMCC26XX_startStream Failing</h2>
<p><a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> returns false if it fails. The following can cause <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> to fail:</p><ul>
<li>The driver is already streaming</li>
<li>The I2S driver could not successfully start reading the pdm stream</li>
</ul>
<h2>PDMCC26XX_stopStream Failing</h2>
<p><a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> returns false if it fails. The following can cause <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> to fail:</p><ul>
<li>The driver is not currently streaming</li>
<li>The I2S driver could not gracefully shut down</li>
</ul>
<h1>Power Management</h1>
<p>The PDMCC26XX driver sets a power constraint while streaming to keep the device out of standby. When the stream has ended, the power constraint is released.</p>
<p>The following statements are valid:</p><ul>
<li>After <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a>: the device is still allowed to enter standby.</li>
<li>During <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a>: the device cannot enter standby.</li>
<li>After <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> succeeds: the device can enter standby.</li>
<li>If <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a> is called: the device can enter standby.</li>
</ul>
<h1>Supported Functions</h1>
<table class="doxtable">
<tr>
<th>API function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8347c3f56db0ad7c3f357f13be098cf2" title="PDM CC26XX initialization. ">PDMCC26XX_init()</a> </td><td>Initialize PDM driver </td></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> </td><td>Set system dependencies, configure pins </td></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> </td><td>Turn on mic, start stream and prevent standby </td></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> </td><td>Stop stream and release standby hold, turn off mic </td></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a> </td><td>Request a buffer from the driver </td></tr>
<tr>
<td><a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a> </td><td>Disable HW and release system dependencies </td></tr>
</table>
<h1>Standard Use Case</h1>
<p>The standard use case involves calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> once and calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> and <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> to start and stop the stream as needed. <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a> is called when the PDM driver will no longer be needed again. In order for the PDM driver task to run, the application pends on a semaphore that is posted in the <a class="el" href="struct_p_d_m_c_c26_x_x___params.html#ada480cae6ca7398efef4293350f92090">PDMCC26XX_Params::callbackFxn</a>. In this example, the application requests 128 buffers. In a real application, the process of pending on a semaphore, requesting a buffer, and freeing it would be repeated as often as required by the use case before stopping the stream. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> bufRdy_callback(<a class="code" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Handle</a> handle, <a class="code" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a> *pStreamNotification)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a> streamStatus = pStreamNotification-&gt;<a class="code" href="struct_p_d_m_c_c26_x_x___stream_notification.html#a57a4fc3f0b7fc1ff267b164cafff063c">status</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (streamStatus == <a class="code" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a7fbacf5e84041b2a8b635df5cf1789a6">PDMCC26XX_STREAM_BLOCK_READY</a> || streamStatus == <a class="code" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a3bb09525b04c787e27fa7ce2505ebcbe">PDMCC26XX_STREAM_BLOCK_READY_BUT_PDM_OVERFLOW</a>){</div>
<div class="line">        Semaphore_post(Semaphore_handle(&amp;bufferReadySemaphore));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// Handle the error</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> applicationTask(UArg a0, UArg a1){</div>
<div class="line">    Semaphore_Params semParams;</div>
<div class="line">    <a class="code" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a> bufferRequest;</div>
<div class="line">    <span class="keyword">const</span> uint16_t returnBufferSize = 64;</div>
<div class="line">    <span class="keyword">const</span> uint8_t numberOfPcmBuffersToRequest = 128;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize semaphore</span></div>
<div class="line">    Semaphore_Params_init(&amp;semParams);</div>
<div class="line">    semParams.mode = Semaphore_Mode_BINARY;</div>
<div class="line">    Semaphore_construct(&amp;bufferReadySemaphore, 0, &amp;semParams);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set up parameters for PDM streaming with compression</span></div>
<div class="line">    <a class="code" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a> pdmParams = {</div>
<div class="line">        .<a class="code" href="struct_p_d_m_c_c26_x_x___params.html#ada480cae6ca7398efef4293350f92090">callbackFxn</a> = bufRdy_callback,</div>
<div class="line">        .useDefaultFilter = <span class="keyword">true</span>,</div>
<div class="line">        .decimationFilter = NULL,</div>
<div class="line">        .micGain = <a class="code" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267fa5929463bec3b2bb2da1e240c8a3a2aad">PDMCC26XX_GAIN_12</a>,</div>
<div class="line">        .micPowerActiveHigh = <span class="keyword">true</span>,</div>
<div class="line">        .applyCompression = <span class="keyword">true</span>,</div>
<div class="line">        .startupDelayWithClockInSamples = 0,</div>
<div class="line">        .retBufSizeInBytes = returnBufferSize,</div>
<div class="line">        .mallocFxn = &amp;malloc,</div>
<div class="line">        .freeFxn = &amp;free,</div>
<div class="line">        .custom = NULL</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Try to open the PDM driver</span></div>
<div class="line">    <span class="keywordflow">if</span>(pdmHandle = <a class="code" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0">PDMCC26XX_open</a>(&amp;pdmParams) == NULL){</div>
<div class="line">        <span class="comment">// Handle PDMCC26XX_open() failing</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Try to start streaming</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d">PDMCC26XX_startStream</a>(pdmHandle)){</div>
<div class="line">        uint8_t pcmBuffersRequestedSoFar;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Request numberOfPcmBuffersToRequest buffers and then stop the stream</span></div>
<div class="line">        <span class="keywordflow">for</span> (pcmBuffersRequestedSoFar = 0; pcmBuffersRequestedSoFar &lt; numberOfPcmBuffersToRequest; pcmBuffersRequestedSoFar++){</div>
<div class="line">            <span class="comment">// Pend on the semaphore until a buffer is available from the PDM driver</span></div>
<div class="line">            Semaphore_pend(Semaphore_handle(&amp;bufferReadySemaphore), BIOS_WAIT_FOREVER);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Now request a buffer as it was indicated that one is available</span></div>
<div class="line">            <a class="code" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d">PDMCC26XX_requestBuffer</a>(pdmHandle, &amp;bufferRequest);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Process bufferRequest</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// Free the buffer</span></div>
<div class="line">            my_free(bufferRequest.<a class="code" href="struct_p_d_m_c_c26_x_x___buffer_request.html#af1ba97caba202d780151fb276b128802">buffer</a>, returnBufferSize);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Try to stop the stream</span></div>
<div class="line">        <span class="keywordflow">if</span>(!<a class="code" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2">PDMCC26XX_stopStream</a>(pdmHandle)){</div>
<div class="line">            <span class="comment">// Handle PDMCC26XX_stopStream() failing</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>{</div>
<div class="line">        <span class="comment">// Handle PDMCC26XX_startStream() failing</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Instrumentation</h1>
<p>The PDM driver interface produces log statements if instrumentation is enabled.</p>
<table class="doxtable">
<tr>
<th>Instrumentation </th><th>Description  </th></tr>
<tr>
<td>Diags_USER1 </td><td>Logs the start and end of each API call of the PDM driver and progress through events </td></tr>
<tr>
<td>Diags_USER2 </td><td>Logs occurances in the I2S sub-module of the PDM driver </td></tr>
<tr>
<td>Warnings </td><td>Logs unexpected events such as initialisations or memory allocations failing </td></tr>
</table>
<hr/>
</div><div class="textblock"><code>#include &lt;ti/sysbios/knl/Semaphore.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_p_i_n_8h_source.html">ti/drivers/PIN.h</a>&gt;</code><br />
<code>#include &lt;ti/sysbios/family/arm/m3/Hwi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_8h_source.html">ti/drivers/Power.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_c_c26_x_x_8h_source.html">ti/drivers/power/PowerCC26XX.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PDMCC26XX.h:</div>
<div class="dyncontent">
<div class="center"><img src="_p_d_m_c_c26_x_x_8h__incl.png" border="0" usemap="#_p_d_m_c_c26_x_x_8h" alt=""/></div>
<map name="_p_d_m_c_c26_x_x_8h" id="_p_d_m_c_c26_x_x_8h">
<area shape="rect" href="_p_i_n_8h.html" title="Generic PIN &amp; GPIO driver. " alt="" coords="122,246,231,270" /><area shape="rect" href="_power_8h.html" title="Power manager interface. " alt="" coords="261,165,383,189" /><area shape="rect" href="_power_c_c26_x_x_8h.html" title="Power manager interface for CC26XX. " alt="" coords="366,84,582,108" /><area shape="rect" href="_list_8h.html" title="Linked List interface for use in drivers. " alt="" coords="255,246,389,270" /></map>
</div>
</div>
<p><a href="_p_d_m_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x__meta_data.html">PDMCC26XX_metaData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Metadata associated with an array of PCM data.  <a href="struct_p_d_m_c_c26_x_x__meta_data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x__pcm_buffer.html">PDMCC26XX_pcmBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PCM buffer pointed to in a <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html" title="A PDMCC26XX_BufferRequest data structure is used with PDMCC26XX_requestBuffer(). ">PDMCC26XX_BufferRequest</a>.  <a href="struct_p_d_m_c_c26_x_x__pcm_buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="struct_p_d_m_c_c26_x_x___config.html" title="The PDMCC26XX_Config structure contains a set of pointers used to characterize the PDMCC26XX driver i...">PDMCC26XX_Config</a> structure contains a set of pointers used to characterize the PDMCC26XX driver implementation.  <a href="struct_p_d_m_c_c26_x_x___config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___h_w_attrs.html">PDMCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Hardware attributes.  <a href="struct_p_d_m_c_c26_x_x___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html" title="A PDMCC26XX_StreamNotification data structure is used with PDMCC26XX_CallbackFxn(). Provides notification about available buffers and potential errors. ">PDMCC26XX_StreamNotification</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#ab6fdee59a79029e938e3fbf0e446fa91" title="The definition of a callback function used when buffers are ready. ">PDMCC26XX_CallbackFxn()</a>. Provides notification about available buffers and potential errors.  <a href="struct_p_d_m_c_c26_x_x___stream_notification.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html" title="A PDMCC26XX_BufferRequest data structure is used with PDMCC26XX_requestBuffer(). ">PDMCC26XX_BufferRequest</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a>.  <a href="struct_p_d_m_c_c26_x_x___buffer_request.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Parameters are used to with the <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> call. Default values for these parameters are set using PDMCC26XX_Params_init().  <a href="struct_p_d_m_c_c26_x_x___params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_d_m_c_c26_x_x___object.html">PDMCC26XX_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Object.  <a href="struct_p_d_m_c_c26_x_x___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaa17ecf48f5762e2e1bdb0bab8aacf0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#aaa17ecf48f5762e2e1bdb0bab8aacf0c">ti_sysbios_family_arm_m3_Hwi__nolocalnames</a></td></tr>
<tr class="separator:aaa17ecf48f5762e2e1bdb0bab8aacf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc205204f69ea867c95b30efe1530746"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#adc205204f69ea867c95b30efe1530746">PDM_TASK_STACK_SIZE</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:adc205204f69ea867c95b30efe1530746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27121ab901a1442bbebbdac45fce296"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ac27121ab901a1442bbebbdac45fce296">PDM_BUFFER_SIZE_IN_BLOCKS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ac27121ab901a1442bbebbdac45fce296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f1de681b5b50d6e6db60818b5a481d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a77f1de681b5b50d6e6db60818b5a481d">PCM_SAMPLE_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a77f1de681b5b50d6e6db60818b5a481d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98722a106401368b0df3e68c19c7edd3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a98722a106401368b0df3e68c19c7edd3">PCM_COMPRESSION_RATE</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a98722a106401368b0df3e68c19c7edd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae553576c451c4277d4496b5fe7f26e24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae553576c451c4277d4496b5fe7f26e24">PCM_METADATA_SIZE</a>&#160;&#160;&#160;sizeof(<a class="el" href="struct_p_d_m_c_c26_x_x__meta_data.html">PDMCC26XX_metaData</a>)</td></tr>
<tr class="separator:ae553576c451c4277d4496b5fe7f26e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:acce02978ce536ea3b98a673587a6e75c"><td class="memItemLeft" align="right" valign="top">typedef void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#acce02978ce536ea3b98a673587a6e75c">PDMCC26XX_MallocFxn</a>) (size_t memSize)</td></tr>
<tr class="memdesc:acce02978ce536ea3b98a673587a6e75c"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX_MallocFxn is a function pointer for the malloc function to be used by the driver.  <a href="#acce02978ce536ea3b98a673587a6e75c">More...</a><br /></td></tr>
<tr class="separator:acce02978ce536ea3b98a673587a6e75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af95e29fbea1fadfb011e4ceaa36f1ab0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#af95e29fbea1fadfb011e4ceaa36f1ab0">PDMCC26XX_FreeFxn</a>) (void *ptr, size_t memSize)</td></tr>
<tr class="memdesc:af95e29fbea1fadfb011e4ceaa36f1ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX_FreeFxn is a function pointer for the free function to be used by the driver. This is needed for memory clean up, if something goes wrong.  <a href="#af95e29fbea1fadfb011e4ceaa36f1ab0">More...</a><br /></td></tr>
<tr class="separator:af95e29fbea1fadfb011e4ceaa36f1ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfb1c3839ec53d02703f67f884760119"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#acfb1c3839ec53d02703f67f884760119">PDMCC26XX_Config</a></td></tr>
<tr class="memdesc:acfb1c3839ec53d02703f67f884760119"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="struct_p_d_m_c_c26_x_x___config.html" title="The PDMCC26XX_Config structure contains a set of pointers used to characterize the PDMCC26XX driver i...">PDMCC26XX_Config</a> structure contains a set of pointers used to characterize the PDMCC26XX driver implementation.  <a href="#acfb1c3839ec53d02703f67f884760119">More...</a><br /></td></tr>
<tr class="separator:acfb1c3839ec53d02703f67f884760119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0188ef7df22961ba87b588d2913e793e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___h_w_attrs.html">PDMCC26XX_HWAttrs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a0188ef7df22961ba87b588d2913e793e">PDMCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:a0188ef7df22961ba87b588d2913e793e"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Hardware attributes.  <a href="#a0188ef7df22961ba87b588d2913e793e">More...</a><br /></td></tr>
<tr class="separator:a0188ef7df22961ba87b588d2913e793e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b9ecc0f8eb494e162b4a0a49c0636a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a></td></tr>
<tr class="memdesc:ae5b9ecc0f8eb494e162b4a0a49c0636a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A handle that is returned from a <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> call.  <a href="#ae5b9ecc0f8eb494e162b4a0a49c0636a">More...</a><br /></td></tr>
<tr class="separator:ae5b9ecc0f8eb494e162b4a0a49c0636a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb09af7b7de674b100b1170d574f86c"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#affb09af7b7de674b100b1170d574f86c">PDMCC26XX_Status</a></td></tr>
<tr class="memdesc:affb09af7b7de674b100b1170d574f86c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status codes that are set by the PDM driver.  <a href="#affb09af7b7de674b100b1170d574f86c">More...</a><br /></td></tr>
<tr class="separator:affb09af7b7de674b100b1170d574f86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62dc3dc8663629a376fc5e4e546bfd05"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">PDMCC26XX_Gain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a62dc3dc8663629a376fc5e4e546bfd05">PDMCC26XX_Gain</a></td></tr>
<tr class="memdesc:a62dc3dc8663629a376fc5e4e546bfd05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predefined gain settings.  <a href="#a62dc3dc8663629a376fc5e4e546bfd05">More...</a><br /></td></tr>
<tr class="separator:a62dc3dc8663629a376fc5e4e546bfd05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebd17c183efa14ae0ebe9c229f6c577"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#abebd17c183efa14ae0ebe9c229f6c577">PDMCC26XX_StreamNotification</a></td></tr>
<tr class="memdesc:abebd17c183efa14ae0ebe9c229f6c577"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html" title="A PDMCC26XX_StreamNotification data structure is used with PDMCC26XX_CallbackFxn(). Provides notification about available buffers and potential errors. ">PDMCC26XX_StreamNotification</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#ab6fdee59a79029e938e3fbf0e446fa91" title="The definition of a callback function used when buffers are ready. ">PDMCC26XX_CallbackFxn()</a>. Provides notification about available buffers and potential errors.  <a href="#abebd17c183efa14ae0ebe9c229f6c577">More...</a><br /></td></tr>
<tr class="separator:abebd17c183efa14ae0ebe9c229f6c577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6fdee59a79029e938e3fbf0e446fa91"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ab6fdee59a79029e938e3fbf0e446fa91">PDMCC26XX_CallbackFxn</a>) (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle, <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a> *streamNotification)</td></tr>
<tr class="memdesc:ab6fdee59a79029e938e3fbf0e446fa91"><td class="mdescLeft">&#160;</td><td class="mdescRight">The definition of a callback function used when buffers are ready.  <a href="#ab6fdee59a79029e938e3fbf0e446fa91">More...</a><br /></td></tr>
<tr class="separator:ab6fdee59a79029e938e3fbf0e446fa91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8cebf1f4b5897234e3be6744eb26997"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae8cebf1f4b5897234e3be6744eb26997">PDMCC26XX_BufferRequest</a></td></tr>
<tr class="memdesc:ae8cebf1f4b5897234e3be6744eb26997"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html" title="A PDMCC26XX_BufferRequest data structure is used with PDMCC26XX_requestBuffer(). ">PDMCC26XX_BufferRequest</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a>.  <a href="#ae8cebf1f4b5897234e3be6744eb26997">More...</a><br /></td></tr>
<tr class="separator:ae8cebf1f4b5897234e3be6744eb26997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31104648f1849f5eef36ef1d98465a6b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a31104648f1849f5eef36ef1d98465a6b">PDMCC26XX_Params</a></td></tr>
<tr class="memdesc:a31104648f1849f5eef36ef1d98465a6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Parameters are used to with the <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> call. Default values for these parameters are set using PDMCC26XX_Params_init().  <a href="#a31104648f1849f5eef36ef1d98465a6b">More...</a><br /></td></tr>
<tr class="separator:a31104648f1849f5eef36ef1d98465a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8faebd80770af564015834b59c2d3414"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___object.html">PDMCC26XX_Object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8faebd80770af564015834b59c2d3414">PDMCC26XX_Object</a></td></tr>
<tr class="memdesc:a8faebd80770af564015834b59c2d3414"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDMCC26XX Object.  <a href="#a8faebd80770af564015834b59c2d3414">More...</a><br /></td></tr>
<tr class="separator:a8faebd80770af564015834b59c2d3414"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:afbfe993e790be75708df00186070a779"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a> { <br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a6541acf36472a5a4bae1e918532f5bab">PDMCC26XX_STREAM_IDLE</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a7fbacf5e84041b2a8b635df5cf1789a6">PDMCC26XX_STREAM_BLOCK_READY</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a3bb09525b04c787e27fa7ce2505ebcbe">PDMCC26XX_STREAM_BLOCK_READY_BUT_PDM_OVERFLOW</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779addbca577e199cd8cad66eb880d81896b">PDMCC26XX_STREAM_ERROR</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a57716d15faf09d4f066fe77f473de9db">PDMCC26XX_STREAM_STOPPING</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779a772c35528b1c577ee8702c064c37554f">PDMCC26XX_STREAM_STOPPED</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779addce783eed694cb817cd67ae51d036d5">PDMCC26XX_STREAM_FAILED_TO_STOP</a>
<br />
 }</td></tr>
<tr class="memdesc:afbfe993e790be75708df00186070a779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status codes that are set by the PDM driver.  <a href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">More...</a><br /></td></tr>
<tr class="separator:afbfe993e790be75708df00186070a779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2d67aee547a2c8228465034ae0267f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">PDMCC26XX_Gain</a> { <br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267fad32df2e2c24bdb0d67c3ec63c0c46178">PDMCC26XX_GAIN_24</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267fa332b4d0aeb82669190f2b2bcfa9ea6c8">PDMCC26XX_GAIN_18</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267fa5929463bec3b2bb2da1e240c8a3a2aad">PDMCC26XX_GAIN_12</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267faa10d346442b2427f47bd7939a0f0dc6a">PDMCC26XX_GAIN_6</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267fa78540d7f8b49c98ee87afaaaba1f9c36">PDMCC26XX_GAIN_0</a>, 
<br />
&#160;&#160;<a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267faa4811cff958da5ec7ee700237beacb3b">PDMCC26XX_GAIN_END</a>
<br />
 }</td></tr>
<tr class="memdesc:a8c2d67aee547a2c8228465034ae0267f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predefined gain settings.  <a href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">More...</a><br /></td></tr>
<tr class="separator:a8c2d67aee547a2c8228465034ae0267f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8347c3f56db0ad7c3f357f13be098cf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8347c3f56db0ad7c3f357f13be098cf2">PDMCC26XX_init</a> (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle)</td></tr>
<tr class="memdesc:a8347c3f56db0ad7c3f357f13be098cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDM CC26XX initialization.  <a href="#a8347c3f56db0ad7c3f357f13be098cf2">More...</a><br /></td></tr>
<tr class="separator:a8347c3f56db0ad7c3f357f13be098cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a431d9b71e0d0eebd5ab85960f1c82ee0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0">PDMCC26XX_open</a> (<a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a> *params)</td></tr>
<tr class="memdesc:a431d9b71e0d0eebd5ab85960f1c82ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate.  <a href="#a431d9b71e0d0eebd5ab85960f1c82ee0">More...</a><br /></td></tr>
<tr class="separator:a431d9b71e0d0eebd5ab85960f1c82ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb9597d25d6b2e02f6903bf6652d4371"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371">PDMCC26XX_close</a> (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle)</td></tr>
<tr class="memdesc:afb9597d25d6b2e02f6903bf6652d4371"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to close a given CC26XX PDM peripheral specified by the PDM handle.  <a href="#afb9597d25d6b2e02f6903bf6652d4371">More...</a><br /></td></tr>
<tr class="separator:afb9597d25d6b2e02f6903bf6652d4371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fafd7c475117bd3ed6783273c2220d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d">PDMCC26XX_startStream</a> (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle)</td></tr>
<tr class="memdesc:af5fafd7c475117bd3ed6783273c2220d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start streaming PDM data.  <a href="#af5fafd7c475117bd3ed6783273c2220d">More...</a><br /></td></tr>
<tr class="separator:af5fafd7c475117bd3ed6783273c2220d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd3b158f38ba1489a56efe5b9a722d2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2">PDMCC26XX_stopStream</a> (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle)</td></tr>
<tr class="memdesc:aebd3b158f38ba1489a56efe5b9a722d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to stop streaming PDM data.  <a href="#aebd3b158f38ba1489a56efe5b9a722d2">More...</a><br /></td></tr>
<tr class="separator:aebd3b158f38ba1489a56efe5b9a722d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a0017513c13ca244f7e3a0f5761e8d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d">PDMCC26XX_requestBuffer</a> (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle, <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a> *bufferRequest)</td></tr>
<tr class="memdesc:a15a0017513c13ca244f7e3a0f5761e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for requesting buffer.  <a href="#a15a0017513c13ca244f7e3a0f5761e8d">More...</a><br /></td></tr>
<tr class="separator:a15a0017513c13ca244f7e3a0f5761e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:affba2052183dd56aa6315608a6ec2633"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#affba2052183dd56aa6315608a6ec2633">PDMCC26XX_config</a> []</td></tr>
<tr class="separator:affba2052183dd56aa6315608a6ec2633"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aaa17ecf48f5762e2e1bdb0bab8aacf0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ti_sysbios_family_arm_m3_Hwi__nolocalnames</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The following allows this header file to be included in an application file which also includes ti/sysbios/hal/Hwi.h. </p>

</div>
</div>
<a class="anchor" id="adc205204f69ea867c95b30efe1530746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDM_TASK_STACK_SIZE&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines TI-RTOS stack size allocation. It is a conservative estimate. Change this to save a few bytes of RAM on stack allocation. The stack usage is independent of the PCM return buffer size specified by the application. </p>

</div>
</div>
<a class="anchor" id="ac27121ab901a1442bbebbdac45fce296"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDM_BUFFER_SIZE_IN_BLOCKS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PDM buffer size in number of blocks. We assume that we will be able to consume PDM samples in a timely manner. This allows us to use the minium number of blocks (3) for the PDMCC26XX driver. If the application can not service the PDM task in time, increase this value to permit more latency in processing incoming PDM data at the cost of increased RAM useage. </p>

</div>
</div>
<a class="anchor" id="a77f1de681b5b50d6e6db60818b5a481d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCM_SAMPLE_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncompressed PCM sample size in bits </p><dl class="section note"><dt>Note</dt><dd>Internal use only since only 16 bits are supported </dd></dl>

</div>
</div>
<a class="anchor" id="a98722a106401368b0df3e68c19c7edd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCM_COMPRESSION_RATE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compression rate if compression is enabled </p>

</div>
</div>
<a class="anchor" id="ae553576c451c4277d4496b5fe7f26e24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCM_METADATA_SIZE&#160;&#160;&#160;sizeof(<a class="el" href="struct_p_d_m_c_c26_x_x__meta_data.html">PDMCC26XX_metaData</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PCM data metadata size. When a buffer is requested there will be metadata prepended. In other words the pointer returned points to the metadata header. Depending on the mode, this contains different information. The first byte is always an 8-bit sequence number. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="acce02978ce536ea3b98a673587a6e75c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void*(* PDMCC26XX_MallocFxn) (size_t memSize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDMCC26XX_MallocFxn is a function pointer for the malloc function to be used by the driver. </p>

</div>
</div>
<a class="anchor" id="af95e29fbea1fadfb011e4ceaa36f1ab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* PDMCC26XX_FreeFxn) (void *ptr, size_t memSize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDMCC26XX_FreeFxn is a function pointer for the free function to be used by the driver. This is needed for memory clean up, if something goes wrong. </p>

</div>
</div>
<a class="anchor" id="acfb1c3839ec53d02703f67f884760119"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The <a class="el" href="struct_p_d_m_c_c26_x_x___config.html" title="The PDMCC26XX_Config structure contains a set of pointers used to characterize the PDMCC26XX driver i...">PDMCC26XX_Config</a> structure contains a set of pointers used to characterize the PDMCC26XX driver implementation. </p>

</div>
</div>
<a class="anchor" id="a0188ef7df22961ba87b588d2913e793e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___h_w_attrs.html">PDMCC26XX_HWAttrs</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___h_w_attrs.html">PDMCC26XX_HWAttrs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDMCC26XX Hardware attributes. </p>
<p>These fields are used by the PDM driver </p>

</div>
</div>
<a class="anchor" id="ae5b9ecc0f8eb494e162b4a0a49c0636a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a>* <a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A handle that is returned from a <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> call. </p>

</div>
</div>
<a class="anchor" id="affb09af7b7de674b100b1170d574f86c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a>  <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status codes that are set by the PDM driver. </p>

</div>
</div>
<a class="anchor" id="a62dc3dc8663629a376fc5e4e546bfd05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">PDMCC26XX_Gain</a>  <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">PDMCC26XX_Gain</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predefined gain settings. </p>
<p>Gain is controlled by modifying the first coefficient of the PDM filter. Use these defines to get correct gain setting. All these values are in dB. Default filter will add 12dB gain. In fact this is not an amplification, this setting uses all the information in the PDM samples, so if use case allows it this will have the least compromised range. PDM2PCM algotrithm returns false if any of the samples decimated goes above 2^16 - 1, i.e. the sample clipped during decimation. This information can be used for automatic gain control. </p>

</div>
</div>
<a class="anchor" id="abebd17c183efa14ae0ebe9c229f6c577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html" title="A PDMCC26XX_StreamNotification data structure is used with PDMCC26XX_CallbackFxn(). Provides notification about available buffers and potential errors. ">PDMCC26XX_StreamNotification</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#ab6fdee59a79029e938e3fbf0e446fa91" title="The definition of a callback function used when buffers are ready. ">PDMCC26XX_CallbackFxn()</a>. Provides notification about available buffers and potential errors. </p>

</div>
</div>
<a class="anchor" id="ab6fdee59a79029e938e3fbf0e446fa91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* PDMCC26XX_CallbackFxn) (<a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> handle, <a class="el" href="struct_p_d_m_c_c26_x_x___stream_notification.html">PDMCC26XX_StreamNotification</a> *streamNotification)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The definition of a callback function used when buffers are ready. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PDMCC26XX_Handle</td><td>PDMCC26XX_Handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae8cebf1f4b5897234e3be6744eb26997"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html" title="A PDMCC26XX_BufferRequest data structure is used with PDMCC26XX_requestBuffer(). ">PDMCC26XX_BufferRequest</a> data structure is used with <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a>. </p>
<p>buffer is a pointer to the requested buffer. It is NULL if no buffer is available. Each buffer contains a metadata header of size PCM_METADATA_SIZE. The first byte of the metadata is always an 8 bit sequence number. The other bytes depends on mode.</p>
<table class="doxtable">
<tr>
<th>Mode </th><th>Interpretation of bufferIn being NULL after returning  </th></tr>
<tr>
<td>Blocking mode </td><td>Request timed out and still no buffer available </td></tr>
<tr>
<td>Non-Blocking mode </td><td>No buffer available </td></tr>
</table>

</div>
</div>
<a class="anchor" id="a31104648f1849f5eef36ef1d98465a6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDMCC26XX Parameters are used to with the <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> call. Default values for these parameters are set using PDMCC26XX_Params_init(). </p>
<dl class="section see"><dt>See also</dt><dd>PDMCC26XX_Params_init </dd></dl>

</div>
</div>
<a class="anchor" id="a8faebd80770af564015834b59c2d3414"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_d_m_c_c26_x_x___object.html">PDMCC26XX_Object</a>  <a class="el" href="struct_p_d_m_c_c26_x_x___object.html">PDMCC26XX_Object</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDMCC26XX Object. </p>
<p>The application must not access any member variables of this structure! </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="afbfe993e790be75708df00186070a779"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afbfe993e790be75708df00186070a779">PDMCC26XX_Status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status codes that are set by the PDM driver. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779a6541acf36472a5a4bae1e918532f5bab"></a>PDMCC26XX_STREAM_IDLE&#160;</td><td class="fielddoc">
<p>Idle mode. Stream not started </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779a7fbacf5e84041b2a8b635df5cf1789a6"></a>PDMCC26XX_STREAM_BLOCK_READY&#160;</td><td class="fielddoc">
<p>Buffer ready </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779a3bb09525b04c787e27fa7ce2505ebcbe"></a>PDMCC26XX_STREAM_BLOCK_READY_BUT_PDM_OVERFLOW&#160;</td><td class="fielddoc">
<p>Buffer ready, but the PDMCC26XX driver is impending failure if not serviced in time. Stream is likely to stop now. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779addbca577e199cd8cad66eb880d81896b"></a>PDMCC26XX_STREAM_ERROR&#160;</td><td class="fielddoc">
<p>Driver error </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779a57716d15faf09d4f066fe77f473de9db"></a>PDMCC26XX_STREAM_STOPPING&#160;</td><td class="fielddoc">
<p>A stop was requested and this is the last buffer to be produced. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779a772c35528b1c577ee8702c064c37554f"></a>PDMCC26XX_STREAM_STOPPED&#160;</td><td class="fielddoc">
<p>Unused </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbfe993e790be75708df00186070a779addce783eed694cb817cd67ae51d036d5"></a>PDMCC26XX_STREAM_FAILED_TO_STOP&#160;</td><td class="fielddoc">
<p>Buffer ready </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a8c2d67aee547a2c8228465034ae0267f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a8c2d67aee547a2c8228465034ae0267f">PDMCC26XX_Gain</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predefined gain settings. </p>
<p>Gain is controlled by modifying the first coefficient of the PDM filter. Use these defines to get correct gain setting. All these values are in dB. Default filter will add 12dB gain. In fact this is not an amplification, this setting uses all the information in the PDM samples, so if use case allows it this will have the least compromised range. PDM2PCM algotrithm returns false if any of the samples decimated goes above 2^16 - 1, i.e. the sample clipped during decimation. This information can be used for automatic gain control. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267fad32df2e2c24bdb0d67c3ec63c0c46178"></a>PDMCC26XX_GAIN_24&#160;</td><td class="fielddoc">
<p>24dB gain </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267fa332b4d0aeb82669190f2b2bcfa9ea6c8"></a>PDMCC26XX_GAIN_18&#160;</td><td class="fielddoc">
<p>18dB gain </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267fa5929463bec3b2bb2da1e240c8a3a2aad"></a>PDMCC26XX_GAIN_12&#160;</td><td class="fielddoc">
<p>12dB gain. Default </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267faa10d346442b2427f47bd7939a0f0dc6a"></a>PDMCC26XX_GAIN_6&#160;</td><td class="fielddoc">
<p>6dB gain </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267fa78540d7f8b49c98ee87afaaaba1f9c36"></a>PDMCC26XX_GAIN_0&#160;</td><td class="fielddoc">
<p>0dB gain </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8c2d67aee547a2c8228465034ae0267faa4811cff958da5ec7ee700237beacb3b"></a>PDMCC26XX_GAIN_END&#160;</td><td class="fielddoc">
<p>Internal use only </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8347c3f56db0ad7c3f357f13be098cf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PDMCC26XX_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDM CC26XX initialization. </p>

</div>
</div>
<a class="anchor" id="a431d9b71e0d0eebd5ab85960f1c82ee0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a> PDMCC26XX_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_d_m_c_c26_x_x___params.html">PDMCC26XX_Params</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. </p>
<p>The function will set a dependency on the PDM module, which in turn powers up the module and enables the clock. IOs are also allocated, however the PDM driver will not begin streaming audio until <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> is called.</p>
<dl class="section pre"><dt>Precondition</dt><dd>PDM controller has been initialized</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Pointer to a parameter block. Will use default parameters if NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A PDMCC26XX_Handle on success or a NULL on an error or if it has been already opened</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="afb9597d25d6b2e02f6903bf6652d4371"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PDMCC26XX_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to close a given CC26XX PDM peripheral specified by the PDM handle. </p>
<p>Posts an event that shuts down the I2S hardware, frees all memory used by the driver on the heap, releases the pins back to the PIN driver, and releases the dependency on the corresponding power domain.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> has to be called first.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The PDM task must be allowed to run to synchronously shut down the driver</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A PDMCC26XX_Handle returned from <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af5fafd7c475117bd3ed6783273c2220d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PDMCC26XX_startStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to start streaming PDM data. </p>
<p>Posts an event that tells the I2S hardware to start streaming and the PDM task to start processing incoming data.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> has to be called first.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The PDM task must be allowed to run (by e.g. pending on a semaphore in the application task) to process incoming PDM data from the I2S module.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A PDM handle returned from <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if transfer is successful and false if not</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a>, <a class="el" href="_p_d_m_c_c26_x_x_8h.html#aebd3b158f38ba1489a56efe5b9a722d2" title="Function to stop streaming PDM data. ">PDMCC26XX_stopStream()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aebd3b158f38ba1489a56efe5b9a722d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PDMCC26XX_stopStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to stop streaming PDM data. </p>
<p>Blocks while the I2S module shuts down gracefully. Subsequently posts an event to let the PDM task process any remaining data.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> has to be called first.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A PDM handle returned from <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if stream stopped successfully and false if not</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Process all available PCM buffers by calling <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a15a0017513c13ca244f7e3a0f5761e8d" title="Function for requesting buffer. ">PDMCC26XX_requestBuffer()</a> until it returns false. Otherwise, the available PCM buffers will take up space on the heap until <a class="el" href="_p_d_m_c_c26_x_x_8h.html#afb9597d25d6b2e02f6903bf6652d4371" title="Function to close a given CC26XX PDM peripheral specified by the PDM handle. ">PDMCC26XX_close()</a> or <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> are called.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a>, <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a15a0017513c13ca244f7e3a0f5761e8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PDMCC26XX_requestBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_p_d_m_c_c26_x_x_8h.html#ae5b9ecc0f8eb494e162b4a0a49c0636a">PDMCC26XX_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html">PDMCC26XX_BufferRequest</a> *&#160;</td>
          <td class="paramname"><em>bufferRequest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for requesting buffer. </p>
<p>PDMCC26XX_requestBuffer returns immediately even if no buffer is available. The caller is notified through events each time a buffer is available. However, more than one buffer may be available. Hence, the caller should request even without notification if the caller is ready to process.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a> and <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> has to be called first.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A PDM handle returned from <a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a></td></tr>
    <tr><td class="paramname">*bufferRequest</td><td>Pointer to <a class="el" href="struct_p_d_m_c_c26_x_x___buffer_request.html" title="A PDMCC26XX_BufferRequest data structure is used with PDMCC26XX_requestBuffer(). ">PDMCC26XX_BufferRequest</a> struct</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if request is successful and false if not</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_p_d_m_c_c26_x_x_8h.html#a431d9b71e0d0eebd5ab85960f1c82ee0" title="Function to initialize the CC26XX PDM peripheral specified by the particular handle. The parameter specifies which mode the PDM will operate. ">PDMCC26XX_open()</a>, <a class="el" href="_p_d_m_c_c26_x_x_8h.html#af5fafd7c475117bd3ed6783273c2220d" title="Function to start streaming PDM data. ">PDMCC26XX_startStream()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="affba2052183dd56aa6315608a6ec2633"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_p_d_m_c_c26_x_x___config.html">PDMCC26XX_Config</a> PDMCC26XX_config[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="struct_p_d_m_c_c26_x_x___config.html" title="The PDMCC26XX_Config structure contains a set of pointers used to characterize the PDMCC26XX driver i...">PDMCC26XX_Config</a> struct defined in the board file </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
Copyright  2018, Texas Instruments Incorporated
</small>
</body>
</html>
